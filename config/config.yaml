# SentimentEngine Configuration

# Stream Input Configuration
stream:
  reconnect_attempts: 3
  reconnect_backoff_base: 2  # Exponential backoff base (seconds)
  buffer_size: 100  # Frame buffer size
  
  # Codec support configuration
  supported_audio_codecs:
    - aac
    - mp3
    - opus
    - pcm_s16le
    - vorbis
  supported_video_codecs:
    - h264
    - h265
    - hevc
    - vp8
    - vp9
    - av1
  
  # Adaptive processing configuration
  adaptive_processing:
    enabled: true
    quality_thresholds:
      high: 0.8      # Quality score >= 0.8 is high quality
      medium: 0.5    # Quality score >= 0.5 is medium quality
      low: 0.3       # Quality score >= 0.3 is low quality
    
    # Adjust frame skip based on quality
    frame_skip_by_quality:
      high: 1        # Process every frame
      medium: 2      # Process every 2nd frame
      low: 3         # Process every 3rd frame
    
    # Minimum resolution thresholds
    min_resolution:
      width: 320
      height: 240
    
    # Audio quality thresholds
    min_audio_bitrate: 32000  # 32 kbps minimum
    target_audio_bitrate: 128000  # 128 kbps target

# Audio Processing Configuration
audio:
  sample_rate: 16000  # Hz
  frame_duration: 0.5  # seconds
  noise_reduction: true
  
# Acoustic Analysis Configuration
acoustic:
  model_path: "models/acoustic/wav2vec2_emotion"
  confidence_threshold: 0.05
  speaker_diarization: true

# Visual Analysis Configuration
visual:
  model_path: "models/visual/fer2013_cnn.pt"
  face_detection_confidence: 0.5
  frame_skip: 2  # Process every Nth frame
  max_faces: 5  # Maximum faces to track

# Linguistic Analysis Configuration
linguistic:
  whisper_model: "base"  # Options: tiny, base, small, medium, large
  sentiment_model: "distilbert-base-uncased-finetuned-sst-2-english"
  buffer_duration: 3.0  # seconds
  processing_interval: 2.0  # seconds

# Fusion Configuration
fusion:
  timer_interval: 1.0  # seconds
  baseline_weights:
    acoustic: 0.33
    visual: 0.33
    linguistic: 0.34
  smoothing_alpha: 0.3  # EMA smoothing factor
  conflict_threshold: 0.5  # Threshold for detecting conflicting modalities
  outlier_weight_reduction: 0.5  # Reduce outlier weight by this factor

# Redis Configuration
redis:
  url: "redis://localhost:6379"
  audio_stream: "audio_frames"
  video_stream: "video_frames"
  result_stream: "sentiment_scores"

# UI Configuration
ui:
  update_interval: 0.1  # seconds
  history_duration: 60  # seconds to display
  port: 8501

# Logging Configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/sentiment_engine.log"

# Performance Configuration
performance:
  use_gpu: true
  max_latency: 3.0  # seconds (warning threshold)
  target_latency: 1.0  # seconds (target)
